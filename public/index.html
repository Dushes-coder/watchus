<!doctype html>
<html lang="ru">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5" />
    <title>Watch Together</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    
</head>

<body>
    <div class="main-layout">
        <!-- Left Panel: Video Player & Games -->
        <div class="left-panel">
            <!-- Video Player -->
            <div class="panel compact">
                <div id="playerContainer">
                    <div class="player-inner" id="playerInner"></div>
                </div>
                <div class="controls-bar">
                    <button id="seekBack" class="secondary" aria-label="–ü–µ—Ä–µ–º–æ—Ç–∞—Ç—å –Ω–∞–∑–∞–¥">‚è™</button>
                    <button id="playPause" class="primary" aria-label="–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏/–ü–∞—É–∑–∞">‚ñ∂Ô∏è</button>
                    <button id="seekFwd" class="secondary" aria-label="–ü–µ—Ä–µ–º–æ—Ç–∞—Ç—å –≤–ø–µ—Ä–µ–¥">‚è©</button>
                    <div class="time-display">
                        <span id="time">0</span>
                        <span>—Å–µ–∫</span>
                    </div>
                </div>
            </div>
            <!-- Games Section -->
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-title">
                        <span class="icon">üéÆ</span>
                        <span>–ò–≥—Ä—ã</span>
                    </div>
                </div>
                <div id="gameContainer">
                    <h2>üéÆ –ò–≥—Ä—ã</h2>
                    <p>–í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä—É –¥–ª—è –Ω–∞—á–∞–ª–∞:</p>
                    
                    <div class="games-grid">
                        <div class="game-card" onclick="openGame('tictactoe')">
                            <div class="game-icon">‚≠ï</div>
                            <div class="game-title">–ö—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏</div>
                            <div class="game-description">–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –∏–≥—Ä–∞ 3x3</div>
                        </div>
                        
                        <div class="game-card" onclick="openGame('chess')">
                            <div class="game-icon">‚ôüÔ∏è</div>
                            <div class="game-title">–®–∞—Ö–º–∞—Ç—ã</div>
                            <div class="game-description">–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∞—è –∏–≥—Ä–∞</div>
                        </div>
                        
                        <div class="game-card" onclick="openGame('cards')">
                            <div class="game-icon">üÉè</div>
                            <div class="game-title">–ö–∞—Ä—Ç–æ—á–Ω—ã–µ –∏–≥—Ä—ã</div>
                            <div class="game-description">–ü–æ–∫–µ—Ä –∏ –î—É—Ä–∞–∫</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Active Game Panel -->
            <div id="activeGamePanel" class="game-panel hidden">
                <div class="panel-header">
                    <div class="panel-title">
                        <span id="activeGameIcon" class="icon">üéÆ</span>
                        <span id="activeGameTitle">–ò–≥—Ä–∞</span>
                    </div>
                    <button class="secondary icon-btn" onclick="closeGame()">‚úï</button>
                </div>
                <div id="activeGameContent"></div>
            </div>
        </div>

        <!-- Right Panel: Chat & Room Settings -->
        <div class="right-panel">
            <!-- Chat -->
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-title">
                        <span class="icon">üí¨</span>
                        <span>–ß–∞—Ç</span>
                    </div>
                </div>
                <div class="chat-container">
                    <div class="chat-messages" id="chatBox"></div>
                    <div class="chat-input-group">
                        <textarea id="chatMsg" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ..." rows="1"></textarea>
                        <button id="sendMsg" class="primary">‚û§</button>
                    </div>
                </div>
            </div>

            <!-- Room Settings -->
            <div class="panel compact">
                <div class="panel-header">
                    <div class="panel-title">
                        <span class="icon">‚öôÔ∏è</span>
                        <span>–ö–æ–º–Ω–∞—Ç–∞</span>
                    </div>
                </div>
                <div class="room-settings">
                    <button id="openRoom" class="primary">üé¨ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–Ω–∞—Ç—ã</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Room Modal -->
    <div id="roomModal" class="modal-overlay" aria-hidden="true" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–Ω–∞—Ç—ã</h3>
                <button id="closeRoom" class="secondary icon-btn" aria-label="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
            </div>
            <div class="form-group">
                <label for="roomId">ID –∫–æ–º–Ω–∞—Ç—ã</label>
                <input id="roomId" type="text" placeholder="movie-night-123" />
            </div>
            <div class="form-group">
                <label for="videoUrl">–°—Å—ã–ª–∫–∞ –Ω–∞ –≤–∏–¥–µ–æ</label>
                <input id="videoUrl" type="text" placeholder="https://example.com/video.mp4" />
                <p class="help-text">MP4, HLS (.m3u8), YouTube</p>
            </div>
            <div class="form-group">
                <label for="videoFile">–õ–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª</label>
                <input id="videoFile" type="file" accept="video/*,.m3u8" />
                <p class="help-text">‚ö†Ô∏è –í–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –≤–∞–º</p>
            </div>
            <div class="form-actions">
                <button id="createBtn" class="primary">–í–æ–π—Ç–∏</button>
                <button id="copyInvite" class="secondary">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                <button id="resetSaved" class="secondary">üîÑ –°–±—Ä–æ—Å</button>
            </div>
        </div>
    </div>

    <!-- Floating Camera -->
    <div id="floatingCam" class="floating-cam">
        <div class="fc-header" id="camHeader">
            <span class="fc-header-title">üìπ –í–∏–¥–µ–æ—Å–≤—è–∑—å</span>
            <div class="fc-header-actions">
                <button id="pipBtn" class="secondary">üóî</button>
                <button id="toggleSelf" class="secondary">üë§</button>
                <button id="closeCam" class="secondary">‚úï</button>
            </div>
        </div>
        <div class="fc-body">
            <video id="localVideo" autoplay muted playsinline></video>
            <video id="remoteVideo" autoplay playsinline></video>
        </div>
        <div class="fc-footer">
            <button id="toggleCam" class="primary">üì∑ –ö–∞–º–µ—Ä–∞</button>
        </div>
        <div class="resize-handle rh-right"></div>
        <div class="resize-handle rh-bottom"></div>
        <div class="resize-handle rh-corner"></div>
    </div>

    <script src="socket.io/socket.io.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@1.5.1/dist/hls.min.js"></script>
    <script src="https://www.youtube.com/iframe_api"></script>
     <script src="client.js"></script>
  <script src="games.js"></script>
</body>
</html>